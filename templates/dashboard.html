<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="../static/dashboard.css" type="text/css">
	<title></title>
</head>
<body>

<section>
 <!-- <div class="left-div"> 
		<br>
		<h2 class="logo">M -<span style="font-weight: 100; "> SoftTech</span></h2>
		<hr class="hr" />
		<ul class="nav">
			<li><a href=""><i class="fa fa-th-large"></i> Home</a></li>
			<li><a href=""><i class="fa fa-user"></i> User Control</a></li>
			<li class="active"><a href=""><i class="fa fa-key"></i> Access Request</a></li>
			<li><a href=""><i class="fa fa-desktop"></i> Admin</a></li>
			<li><a href=""><i class="fa fa-gear"></i> Settings</a></li>
			<li><a href=""><i class="fa fa-bullhorn"></i> Support</a></li>
			<li><a href=""><i class="fa fa-power-off"></i> Quit</a></li>
		</ul>
		<br><br>
		<img src="image/s.png" class="support">
	</div> -->

	<div class="right-div">
		<div id="main">

	<div class="head">
		<div class="col-div-6">
		<p class="nav"style="font-weight:bolder"> Dashboard</p>
		</div>
	
	<div class="col-div-6">

</div>
	<div class="clearfix"></div>
</div>
    
	<div class="clearfix"></div>

    <div class=" atmosphere">
		<div class="col-div-6">
		<p class="nav-2"> Atmosphere</p>
		</div>
        <br/><br/>
	
	<div class="col-div-4-1">
		<div class="box">
			<p class="head-1">Season</p>
			<p class="number season">Rabi<span id="month">(Nov to April)</span></p>
			<!-- <p class="percent"><i class="fa fa-long-arrow-up" aria-hidden="true"></i> 5.674% <span>Since Last Months</span></p>
			<i class="fa fa-line-chart box-icon"></i> -->
		</div>
	</div>
	<div class="col-div-4-1">
		<div class="box">
			<p class="head-1">Temperature ( &deg C)</p>
			<p class="number "><span id="temperature">22.5</span></p>
			<!-- <p class="percent" style="color:red!important"><i class="fa fa-long-arrow-down" aria-hidden="true"></i> 5.64% <span>Since Last Months</span></p>
			<i class="fa fa-circle-o-notch box-icon"></i> -->
		</div>
	</div>
	<div class="col-div-4-1">
		<div class="box">
			<p class="head-1">Humidity ( %)</p>
			<p class="number"><span id="humidity">10.2</span> </p>
			<!-- <p class="percent"><i class="fa fa-long-arrow-up" aria-hidden="true"></i> 5.674% <span>Since Last Months</span></p>
			<i class="fa fa-shopping-bag box-icon"></i> -->
		</div>
	</div>
	
	<div class="clearfix"></div>
    <br>
    <div class="prediction">
		<div class="col-div-6">
		<p class="nav-2"> Soil Monitoring</p>
		</div>
        <br/><br/>
        <div class="col-div-4-1">
            <div class="box">
                <p class="head-1"> Soil Temperature( &deg C)</p>
                <p class="number"><span id="soil_temp">26.7</span></p>
                <!-- <p class="percent"><i class="fa fa-long-arrow-up" aria-hidden="true"></i> 5.674% <span>Since Last Months</span></p>
                <i class="fa fa-line-chart box-icon"></i> -->
            </div>
        </div>
        <div class="col-div-4-1">
            <div class="box">
                <p class="head-1">Moisture ( %)</p>
                <p class="number "><span id="moisture">60.8</span></p>
                <!-- <p class="percent" style="color:red!important"><i class="fa fa-long-arrow-down" aria-hidden="true"></i> 5.64% <span>Since Last Months</span></p>
                <i class="fa fa-circle-o-notch box-icon"></i> -->
            </div>
        </div>
        <div class="col-div-4-1">
            <div class="box ">
                <p class="head-1" style=" margin-bottom: 0px;"> Soil Nutrients(mg/Kg)</p>
                <div class="col-div-4-1 ">               
                     <p class="head-1">Nitrogen</p>
                        <p class="number "><span id="nitrogen">158</span></p>
                </div>
                <div class="col-div-4-1">

                        <p class="head-1">Potassium</p>
                        <p class="number "><span id="potassium">89</span></p>
                </div>
                <div class="col-div-4-1">
                        <p class="head-1">Phosphorus</p>
                        <p class="number "><span id="calcium">45</span></p>
                </div>   
            </div>
        </div>
	</div>
	<br/><br/>
	<div class="clearfix"></div>
    <br>
    <div class="prediction">
		<div class="col-div-6">
		<p class="nav-2">Prediction</p>
		</div>
        <br/><br/>
        <div class="col-div-4-1">
            <div class="box">
                <p class="head-1">Crop Recommendation</p>
                <p class="number"><span id="crop">Wheat</span></p>
                <!-- <p class="percent"><i class="fa fa-long-arrow-up" aria-hidden="true"></i> 5.674% <span>Since Last Months</span></p>
                <i class="fa fa-line-chart box-icon"></i> -->
            </div>
        </div>
        <div class="col-div-4-1">
            <div class="box">
                <p class="head-1">Crop Yield (tonnes/hectare)</p>
                <p class="number "><span id="yield">56.8</span></p>
                <!-- <p class="percent" style="color:red!important"><i class="fa fa-long-arrow-down" aria-hidden="true"></i> 5.64% <span>Since Last Months</span></p>
                <i class="fa fa-circle-o-notch box-icon"></i> -->
            </div>
        </div>
		<div class="col-div-4-1">
            <div class="box">
                <p class="head-1">Irrigation System</p>
                <p class="number "><span id="irrigationOFF">OFF</span>
					<span id="irrigationON"></span></p>
                <!-- <p class="percent" style="color:red!important"><i class="fa fa-long-arrow-down" aria-hidden="true"></i> 5.64% <span>Since Last Months</span></p>
                <i class="fa fa-circle-o-notch box-icon"></i> -->
            </div>
        </div>
	</div>
	<br/><br/>
	

</section>



<!-- <script>
	function updateData() {
		// Use AJAX to make a GET request to the server
		var xhr = new XMLHttpRequest();
		xhr.onreadystatechange = function () {
			if (xhr.readyState == 4 && xhr.status == 200) {
				// Check if the response is not empty
				if (xhr.responseText.trim() !== "") {
					// Parse the JSON response
					var newData = JSON.parse(xhr.responseText);

					// Get the data-list element
					var dataList = document.getElementById("data-list");

					// Clear existing content
					dataList.innerHTML = "";

					// Iterate through the new data and create list items
					newData.forEach(function(item) {
						var listItem = document.createElement("li");
						listItem.textContent = item;
						dataList.appendChild(listItem);
					});
				}
			}
		};
		xhr.open("GET", "/update_data", true);
		xhr.send();
	}

	// Update data every 5 seconds (5000 milliseconds)
	setInterval(updateData, 1000);
	
	// Initial data update
	updateData();
</script> -->
<script>
	newNewData = [];
	function updateData() {
		// Use AJAX to make a GET request to the server
		var xhr = new XMLHttpRequest();
		xhr.onreadystatechange = function () {
			if (xhr.readyState == 4 && xhr.status == 200) {
				// Check if the response is not empty
				if (xhr.responseText.trim() !== "") {
					// Parse the JSON response
					var newData = JSON.parse(xhr.responseText);
					// Get the data-list element
					var dataList1 = document.getElementById("temperature");
					var dataList2 = document.getElementById("humidity");
					var dataList3 = document.getElementById("soil_temp");
					var dataList4 = document.getElementById("moisture");
					var dataList5 = document.getElementById("nitrogen");
					var dataList6 = document.getElementById("potassium");
					var dataList7 = document.getElementById("calcium");
					var dataList8 = document.getElementById("crop");
					// var dataList9 = document.getElementById("yield");
					var dataList10 = document.getElementById("irrigationON");
					var dataList11 = document.getElementById("irrigationOFF");
					var dataList12 = document.getElementById("yield");
					// Clear existing content
					dataList1.innerHTML = "";	
					dataList1.textContent = newData[0];
					dataList2.innerHTML = "";	
					dataList2.textContent = newData[1];
					dataList3.innerHTML = "";	
					dataList3.textContent = newData[2];
					dataList4.innerHTML = "";	
					dataList4.textContent = newData[3];
					dataList5.innerHTML = "";	
					dataList5.textContent = newData[4];
					dataList6.innerHTML = "";	
					dataList6.textContent = newData[5];
					dataList7.innerHTML = "";	
					dataList7.textContent = newData[6];
					dataList8.innerHTML = "";
					dataList8.textContent = newData[10];	
					if(newData[11]==0)
					{
					dataList11.innerHTML = "";
					dataList10.innerHTML = "";	
					dataList10.textContent = 'OFF';
					dataList10.style.color = 'green';
					}
					else 
					{
					dataList10.innerHTML = "";
					dataList11.innerHTML = "";	
					dataList11.textContent = 'ON';
					dataList11.style.color = 'red';
					}
					dataList12.innerHTML="";
					dataList12.textContent = newData[12];
				}
				}
				
			};
			xhr.open("GET", "/update_data", true);
			xhr.send();
		}
	
	// Update data every 5 seconds (5000 milliseconds)
	setInterval(updateData, 1000);
	
	// Initial data update
	updateData();
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
$(document).ready(function(){
  $(".profile p").click(function(){
    $(".profile-div").toggle();
    ';'
  });
  $(".noti-icon").click(function(){
    $(".notification-div").toggle();
  });
});
</script>
<script type="text/javascript">
	$('li').click(function(){
    $('li').removeClass("active");
    $(this).addClass("active");
});
</script>
</body>
</html>